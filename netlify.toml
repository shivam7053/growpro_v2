# netlify.toml
[build]
  command = "npm run build"
  publish = ".next"

# Netlify Functions configuration
[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"

# Scheduled function - runs every hour
[[functions]]
  path = "/send-reminders"
  schedule = "0 * * * *"  # Every hour at minute 0

# Environment variables (set these in Netlify dashboard)
# RESEND_API_KEY - Get from https://resend.com (Free: 3,000 emails/month)
# FROM_EMAIL - Your verified email address in Resend
# SITE_URL - Your Netlify site URL
# FIREBASE_* - Your Firebase credentials

# Redirects for API routes
[[redirects]]
  from = "/api/payment/verify"
  to = "/.netlify/functions/payment-verify"
  status = 200

[[redirects]]
  from = "/api/send-purchase-confirmation"
  to = "/.netlify/functions/send-purchase-confirmation"
  status = 200

[[redirects]]
  from = "/api/send-registration-email"
  to = "/.netlify/functions/send-registration-email"
  status = 200

[[redirects]]
  from = "/api/cron/send-reminders"
  to = "/.netlify/functions/send-reminders"
  status = 200